import{E as N,c as T,e as V,f as F,g as j,h as G,i as O,d as R,j as U,k as q}from"./element-plus-faba5d50.js";import{u as $,b as H}from"./vue-router-a98b23b6.js";import{u as J}from"./vuex-ffd217b4.js";import{G as z}from"./request-c385bea1.js";import{r as x,h as C,b as P,G as Q,o as i,c as w,a as l,L as b,a4 as A,U as k,O as M,P as y,Q as r,ab as S,M as D,a9 as W,S as c,i as Y}from"./@vue-0d9f8f64.js";import{_ as L,r as K}from"./index-ee9a13c2.js";import{u as X,a as Z}from"./@vueuse-e8748e70.js";import"./@element-plus-95de2cb4.js";import"./lodash-es-6bf2d523.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./escape-html-19374969.js";import"./dayjs-39b5b250.js";import"./normalize-wheel-es-ed76fb12.js";import"./axios-4a70c6fc.js";import"./msw-cf010ec4.js";const ee={class:"relative w-full p-0 m-0"},te={class:"flex flex-wrap items-center w-100vw h-[60px] gradient-to-b from-blue-500 to-light-500"},se={class:"hidden sm:flex items-center font-bold z-9"},ne={class:"flex w-35 items-center px-5 text-3xl"},ae={key:0,class:"text-red-500 text-sm mr-2"},oe={class:"flex items-center w-40 flex-col items-start"},le={class:"ws-nowrap"},ce={class:"ws-nowrap"},re={class:"flex flex-grow-1"},ie=l("div",{class:"h-8.75 w-8.75 rounded-full bg-cover"},null,-1),ue={class:"ml-2.5 mr-25 h-6.25 w-17.5 text-xl font-bold"},de={__name:"head",props:{titleName:{type:String,default:""},showLogoutButton:{type:Boolean,default:!0},notLoginPage:{type:Boolean,default:!1}},setup(_){const h=$(),v=J(),d=x(),u=x(!0),e=x(new Date),n=C(()=>{let t=e.value.getHours(),o=e.value.getMinutes(),a=e.value.getSeconds();return t<10&&(t="0"+t),o<10&&(o="0"+o),a<10&&(a="0"+a),t+":"+o+":"+a}),g=C(()=>{let t=e.value.getFullYear(),o=e.value.getMonth()+1,a=e.value.getDate();return a<10&&(a="0"+a),o<10&&(o="0"+o),t+"年"+o+"月"+a+"日"}),s=C(()=>{switch(e.value.getDay()){case 0:return"星期日";case 1:return"星期一";case 2:return"星期二";case 3:return"星期三";case 4:return"星期四";case 5:return"星期五";case 6:return"星期六"}}),m=()=>{v.commit("user/removeUser"),sessionStorage.clear(),h.push("/"),N.success({message:"登出成功",duration:2*1e3})},p=()=>setInterval(()=>{e.value=new Date(e.value.getTime()+1e3)},1e3);let f;const I=()=>{z("/common/getServerTime").then(t=>{t.code==200?(u.value=!1,e.value=new Date(t.data),f&&clearInterval(f),f=p()):(u.value=!0,N.error({message:"时间获取失败",duration:1*1e3}))})},E=()=>{I()};return P(()=>{let t=sessionStorage.getItem("user");d.value=t?JSON.parse(t).nickname:null,I(),document.addEventListener("visibilitychange",E)}),Q(()=>{document.removeEventListener("visibilitychange",E),clearInterval(f)}),(t,o)=>{const a=T;return i(),w("div",ee,[l("div",te,[l("div",se,[l("div",ne,[u.value?(i(),w("span",ae,"(离线)")):b("",!0),A(k(n.value),1)]),l("div",oe,[l("div",le,k(s.value),1),l("div",ce,k(g.value),1)])]),l("div",re,k(_.titleName),1),l("div",{class:M(["flex items-center justify-around h-12.5 z-99 whitespace-nowrap ml-auto mr-2",{"text-black":_.notLoginPage}])},[ie,l("div",ue,k(d.value),1),_.showLogoutButton?(i(),y(a,{key:0,type:"info",class:"ml-2.5 h-6.25",onClick:m},{default:r(()=>[A("退出登录")]),_:1})):b("",!0)],2)])])}}};const _e={key:0,class:"aside-block"},me={__name:"aside-block",props:{list:{type:Array,required:!0,default:[]}},emits:["item-click"],setup(_,{emit:h}){const v=d=>{h("item-click",d)};return(d,u)=>{const e=S("aside-block",!0),n=V,g=F;return _.list.length>0?(i(),w("div",_e,[(i(!0),w(D,null,W(_.list,(s,m)=>(i(),w(D,{key:m},[s.children&&s.children.length?(i(),y(n,{key:0,index:s.menuId.toString()},{title:r(()=>[l("span",null,k(s.menuName),1)]),default:r(()=>[c(e,{list:s.children,onItemClick:v},null,8,["list"])]),_:2},1032,["index"])):(i(),y(g,{key:1,index:s.menuId.toString(),onClick:p=>v(s)},{default:r(()=>[l("span",null,k(s.menuName),1)]),_:2},1032,["index","onClick"]))],64))),128))])):b("",!0)}}},pe=L(me,[["__scopeId","data-v-2261ec37"]]);const ve={class:"aside-body"},fe={__name:"aside",props:{list:{type:Array,required:!0,default:[]}},emits:["item-click"],setup(_,{emit:h}){const v=C(()=>sessionStorage.getItem("currentPathId")||String(2)),d=u=>{h("item-click",u),sessionStorage.setItem("currentPathId",u.menuId),K.push(u.menuPath)};return(u,e)=>{const n=pe,g=j;return i(),w("div",ve,[c(g,{"default-active":v.value},{default:r(()=>[c(n,{list:_.list,onItemClick:d},null,8,["list"])]),_:1},8,["default-active"])])}}},he=L(fe,[["__scopeId","data-v-7a9f503f"]]);const ge={__name:"index",setup(_){const h=X({sm:640,md:768,lg:1024,xl:1280}),{width:v}=Z(),d=x([]);$();const u=H(),e=x(),n=x(!0),g=s=>{e.value=s.menuName};return h.current(),Y(()=>{v.value<768?n.value=!1:n.value=!0}),P(()=>{z("/user/listAllMenu").then(p=>{p.code===200?d.value=p.data:N.error({message:"获取菜单失败"})});let s=u.matched,m=[];s.forEach((p,f)=>{f>0&&m.push(p.name)}),e.value=m.join(">>")}),(s,m)=>{const p=O,f=S("Fold"),I=S("Expand"),E=R,t=U,o=S("router-view"),a=q,B=G;return i(),y(B,{class:"w-100vw h-100vh"},{default:r(()=>[c(p,null,{default:r(()=>[c(de,{"not-login-page":!0,"title-name":e.value},null,8,["title-name"])]),_:1}),c(B,null,{default:r(()=>[c(E,{class:M(["absolute z-99",{"left-81":n.value}]),size:"20",onClick:m[0]||(m[0]=ke=>n.value=!n.value)},{default:r(()=>[n.value?(i(),y(f,{key:0,class:"cursor-pointer"})):b("",!0),n.value?b("",!0):(i(),y(I,{key:1,class:"cursor-pointer"}))]),_:1},8,["class"]),c(t,{class:M({hidden:!n.value})},{default:r(()=>[c(he,{list:d.value,onItemClick:g},null,8,["list"])]),_:1},8,["class"]),c(B,null,{default:r(()=>[c(a,null,{default:r(()=>[c(o)]),_:1})]),_:1})]),_:1})]),_:1})}}},Pe=L(ge,[["__scopeId","data-v-eae62a2e"]]);export{Pe as default};
